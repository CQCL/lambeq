{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# DisCoCat in DisCoPy"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "In the previous tutorial, we learnt the basics of :term:`monoidal categories <monoidal category>` and how to represent them in :term:`DisCoPy`. In this tutorial, we look at the `Distributional Compositional Categorical` model [CSC2010]_, which uses functors to map diagrams from the `rigid category <monoidal.ipynb#Rigid-monoidal-categories>`_ of `pregroup grammars <../string_diagrams.rst#Pregroup-grammars>`_ to vector space semantics.\n",
    "\n",
    ":download:`Download code <../_code/discocat.ipynb>`"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Pregroup grammars"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "`Pregroup grammar <../string_diagrams.rst#Pregroup-grammars>`_ is a grammatical formalism devised by Joachim Lambek in 1999 [Lam1999]_. In pregroups, each word is a morphism with type :math:`I \\to T` where :math:`I` is the monoidal unit and :math:`T` is a rigid type, referred to as the *pregroup type*. Here are some examples for pregroup type assignments:\n",
    "\n",
    "* a noun is given the base type :math:`n`.\n",
    "* an adjective consumes a noun on the noun's left to return another noun, so it is given the type :math:`n\\cdot n^l`.\n",
    "* a transitive verb consumes a noun on its left and another noun on its right to give a sentence, so is given the type :math:`n^r \\cdot s \\cdot n^l`.\n",
    "\n",
    "In the context of pregroups, the :term:`adjoints <adjoint>` :math:`n^l` and :math:`n^r` can be thought of as the left and right inverses of a type :math:`n` respectively. In a pregroup derivation, the words are concatenated using the monoidal product :math:`\\otimes` and linked using :term:`cups <cup>`, which are special morphisms that exist in any :term:`rigid category`. A sentence is grammatically sound if its derivation has a single uncontracted sentence wire.\n",
    "\n",
    "In :term:`DisCoPy`, words are defined using the :py:class:`~discopy.grammar.pregroup.Word` class. A :py:class:`~discopy.grammar.pregroup.Word` is just a :py:class:`~discopy.rigid.Box` where the input type is fixed to be the monoidal unit :math:`I` (or ``Ty()``). A pregroup derivation diagram can be drawn using either the :py:meth:`monoidal.Diagram.draw() <discopy.monoidal.Diagram.draw>` method or the :py:class:`grammar.draw() <discopy.grammar.pregroup.draw>` method."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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dPQeINzc3KDVauHk5HTf14QJE1BVVYWurq7er87Ozt7Ld+/eRX19PRoaGuDi4jKq0tXpdJgyZYrSBTcU1YtvKD2FeOXKlVHN9+3btyGE6FeCfee677yHhISgurq631z3nfWeO3SNjY1wd3cfcb59fX2h0+kwdepUFpyN4Tt9bYy/v/8DPTfS3t6OhoYG3L59G62trffd4Htu9I6OjjAajfcVolarhaOjI9zd3eHr6wtvb284OzubcQtJZQ4ODggODkZwcPCo/01bW1tvCba3t993p63nS6PRQAhxXyH2fHl4eMDHxwfe3t78EAQ7x71r51xcXBAUFISgoCDZUYjMwtXVFSEhIQgJCZEdhWwE38BORERKYfEREZFSWHxERKQUFh8RESmFxUdEREph8RERkVJYfEREpBQWHxERKYXFR0RESmHxERGRUlh8RESkFBYfEREphcVHRERKYfEREZFSWHxERKQUFh8RESmFxUdEREph8RERkVJYfEREpBQWHxERKYXFR0RESmHxERGRUlh8RESkFBYfEREphcVHRERKYfEREZFSWHxERKQUFh8RESmFxUdEREph8RFZoZaWFiQlJSEmJgZRUVE4dOiQ7EhEdsNJdgAiut/HH3+M4OBgHDlyBADQ1NQkORGR/eAjPiIrFB0djRMnTiA7OxunTp2Cp6en7EhEdoPFR2SFwsPDceHCBURHRyMnJwdbtmyRHYnIbvB/dRJZoZqaGvj4+GDt2rXw8vLC3r17ZUcishssPiIrVFxcjKysLGg0Gmi1WuzatUt2JCK74SCEELJDEBERWQqf4yMiIqWw+IiISCksPiIiUgqLj4iIlMLiIyIipbD4iIhIKSw+IiJSCouPiIiU8j/yzqIWL8YKeQAAAABJRU5ErkJggg==\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from discopy import grammar\n",
    "from discopy.grammar import Word\n",
    "from discopy.rigid import Cap, Cup, Id, Ty\n",
    "\n",
    "n, s = Ty('n'), Ty('s')\n",
    "\n",
    "words = [\n",
    "    Word('she', n),\n",
    "    Word('goes', n.r @ s @ n.l),\n",
    "    Word('home', n)\n",
    "]\n",
    "\n",
    "cups = Cup(n, n.r) @ Id(s) @ Cup(n.l, n)\n",
    "\n",
    "assert Id().tensor(*words) == words[0] @ words[1] @ words[2]\n",
    "assert Ty().tensor(*[n.r, s, n.l]) == n.r @ s @ n.l\n",
    "\n",
    "diagram = Id().tensor(*words) >> cups\n",
    "grammar.draw(diagram)"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    ".. note::\n",
    "\n",
    "  In ``lambeq``, method :py:meth:`~lambeq.create_pregroup_diagram` provides an alternative, more compact way to create pregroup diagrams, by explicitly defining a list of :term:`cups <cup>` and :term:`swaps <swap>`. For example, the above diagram can be also generated using the following code:\n",
    "\n",
    "  .. code-block:: python \n",
    "     \n",
    "     from lambeq import create_pregroup_diagram\n",
    "     from discopy import Ty\n",
    "     \n",
    "     words = [Word('she', n), Word('goes', n.r @ s @ n.l), Word('home', n)]\n",
    "     morphisms = [(Cup, 0, 1), (Cup, 3, 4)]\n",
    "     diagram = create_pregroup_diagram(words, Ty('s'), morphisms)\n",
    "     \n",
    "  where the numbers in ``morphisms`` define the indices of the corresponding wires at the top of the diagram\n",
    "  ``(n @ n.r @ s @ n.l @ n)``. In contrast, the ``.cup()`` method in :term:`DisCoPy` can be used to define\n",
    "  diagrams using chaining, and uses indices at the bottom of the diagram:\n",
    "\n",
    "  .. code-block:: python\n",
    "\n",
    "    words = Word('she', n) @ Word('goes', n.r @ s @ n.l) @ Word('home', n)\n",
    "    same_diagram = words.cup(0, 1).cup(1, 2)\n",
    "\n",
    "  The ``.cup()`` method can be applied to non-adjacent qubits, which implicitly introduces swaps. For example:\n",
    "\n",
    "  .. code-block:: python\n",
    "\n",
    "    n, s, p = map(Ty, \"nsp\")\n",
    "    words = Word('A', n @ p) @ Word('V', n.r @ s @ n.l) @ Word('B', p.r @ n)\n",
    "\n",
    "    words.cup(1, 5).cup(0, 1).cup(1, 2).draw()\n",
    "\n",
    "  .. image:: ../../_static/images/string_diagram_with_swaps.png\n",
    "     :width: 350\n",
    "\n",
    "Note that only diagrams of the form ``word @ ... @ word >> cups_and_swaps`` can be drawn using :py:class:`grammar.draw() <discopy.grammar.pregroup.draw>`. Applying functors or normal forms will often cause the diagram to deviate from this form, in which case :py:meth:`monoidal.Diagram.draw() <discopy.monoidal.Diagram.draw>` should be used."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Before normal form: [Word('she', Ty('n')), Word('goes', Ty(Ob('n', z=1), 's', Ob('n', z=-1))), Word('home', Ty('n')), Cup(Ty('n'), Ty(Ob('n', z=1))), Cup(Ty(Ob('n', z=-1)), Ty('n'))]\n",
      "After normal form: [Word('she', Ty('n')), Word('goes', Ty(Ob('n', z=1), 's', Ob('n', z=-1))), Cup(Ty('n'), Ty(Ob('n', z=1))), Word('home', Ty('n')), Cup(Ty(Ob('n', z=-1)), Ty('n'))]\n"
     ]
    },
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAt4AAAEuCAYAAAC57hXbAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjUuMSwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy/YYfK9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAfuklEQVR4nO3de1TUdeL/8deAgAEmiZI3YLAkERF0vFRmUJ5YzbxuXmpTK5e8Zee4ae1ptU2zU2u21Xo0j9WqW0ocZdvSyrILprYW4mVFYyOKi2WZJasgiOjn90ff+K1ftS+a837PDM/HOXMajhCvkXr37OPAuBzHcQQAAADAq4JsDwAAAACaAsIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMIDwBgAAAAwgvAEAAAADCG8AAADAAMIbAAAAMMDnw9vtdsvlchm/ud1u2w8dAJoUW+c9Zz4AU1yO4zi2R/wcl8slGxNtfV4AaKpsnruc+QBM8Pkr3gAAAEAgILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwIuvN1utw4dOmR7BgDAyzjvAfibgAtvAAAAwBf5dXhXV1dr8ODBSk1NVbdu3ZSTkyNJWrRokXr27KmUlBQVFRU1vO/dd9+tPn36qEePHnrttddsTgcAnAfOewCBwK/De8OGDWrfvr12796twsJCDRw4UJLUunVr7dixQ1OmTNHChQslSY899phuvPFGffLJJ/rggw80a9YsVVdX25wPAGgkznsAgcCvwzslJUUbN27Ugw8+qM2bN6tly5aSpJEjR0qSPB6PSktLJUnvvPOOnnjiCaWlpSkjI0O1tbUqLy+3NR0AcB447wEEgma2B/wSiYmJ2rFjh958803Nnj1bAwYMkCSFhYVJkoKDg1VfXy9JchxHubm5uuqqq6ztBQBcGM57AIHAr694f/311woPD9cdd9yhWbNmaceOHed831/96ldatGiRHMeRJO3cudPUTADAL8R5DyAQ+HV479mzR3369FFaWprmzp2r2bNnn/N958yZoxMnTqh79+5KTk7WnDlzDC4FAPwSnPcAAoHL+emSgI9yuVyyMdHW5wWApsrmucuZD8AEv77iDQAAAPgLwhsAAAAwgPAGAAAADCC8AQAAAAMIbwAAAMAAwhsAAAAwgPAGAAAADCC8AQAAAAOa2R7wf4mPj5fL5bLyeQEA5tg673/63ADgbT7/ypUXavXq1Vq/fr1Wr15tewoAwMs8Ho+WLVsmj8djewoAnBNPNQEAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAA5pseJeWliopKUlZWVlKTk5WZmamampqbM8CAHgBZz4AX9Bkw1uSiouLNW3aNO3du1dRUVHKzc21PQkA4CWc+QBsa9LhnZCQoLS0NEk/vvhCaWmp1T0AAO/hzAdgW5MO77CwsIb7wcHBqq+vt7gGAOBNnPkAbGvS4Q0AAACYQngDAAAABjSzPcAWt9utwsLChrdnzpxpcQ0AwJs48wH4Aq54AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABTfYl432Z2+1WWVmZ7RkIUPHx8SotLbU9A4A47+F9nPm+hfD2QWVlZXIcx/YMBCiXy2V7AoD/wXkPb+PM9y081QQAAAAwgPAGAAAADCC8AQAAAAMIbwAAAMAAwhsAAAAwgPAGAAAADCC8AQAAAAMIbwAAAMAAwhs+69FHH9VVV12l6667TrfddpsWLlyoXbt26eqrr1b37t01YsQIHT58WJJUUlKigQMHyuPxqH///ioqKpIkrVmzRt26dVNqaqquv/56mw8HAHAOnPdoKghv+KT8/Hzl5uZq9+7deuutt7R9+3ZJ0vjx4/WnP/1J//rXv5SSkqK5c+dKku655x4tWrRIBQUFWrhwoaZOnSpJmjdvnt5++23t3r1br7/+urXHAwA4O857NCW8ZDx80tatWzVs2DA1b95czZs315AhQ1RdXa3Kykqlp6dLkiZMmKBRo0apqqpKH330kUaNGtXw8cePH5ck9evXT3feeadGjx6tkSNHWnksAIBz47xHU0J4w++dOnVKUVFR2rVr1xm/tnTpUn388cd644035PF4VFBQoOjoaPMjAQC/GOc9/B1PNYFP6tevn9atW6fa2lpVVVVp/fr1ioiI0GWXXabNmzdLkl566SWlp6fr0ksvVUJCgtasWSNJchxHu3fvlvTjcwH79u2refPmqU2bNqqoqLD2mAAAZ+K8R1PCFW/4pN69e2vo0KHq3r27Lr/8cqWkpKhly5ZauXKlJk+erGPHjqlTp05avny5JGnVqlWaMmWK5s+frxMnTmjs2LFKTU3VrFmzVFxcLMdxNGDAAKWmplp+ZACA/8Z5j6bE5TiOY3uEN6xevVrr16/X6tWrbU85by6XSwH6ZTkvVVVVioyM1LFjx3T99ddr2bJl6tmzp+1Zfo9/vhCIPB6Pli1bJo/HY3vKeeHfxx9x3nsP/4z5Fq54w2fdc8892rdvn2prazVhwgQOYQAIUJz3aCoIb/gsf/zTCgDA+eO8R1PBN1cCAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYQHgDAAAABhDeAAAAgAGENwAAAGAAP8fbB8XHx8vlctmegQAVHx9vewKA/8F5D2/jzPcthLcPKi0tvaCPW7BggQ4dOqQFCxZc3EE+bPr06UpMTNT06dNtTzFm+PDhuvPOOzV8+HDbUwD8Qhd63ktSTEyMCgsLFRMTc/EG+bC6ujpFRkaqrq7O9hRjSkpKlJmZqZKSEttTcJHwVBMAAADAAMIbAAAAMIDwBgAAAAwgvIEmaMWKFbr33nttzwAAeBnnvW8hvHFO9fX1ticAAAzhzAe8j/BuQkpLS5WUlKSsrCwlJycrMzNTNTU1p73PI488onHjxqlfv34aN26cpaUXT3V1tQYPHqzU1FR169ZNOTk5tid5XWO+zgACX1M78znvOe/9AeHdxBQXF2vatGnau3evoqKilJube8b77Nu3T++++66ys7MtLLy4NmzYoPbt22v37t0qLCzUwIEDbU8yojFfZwCBrymd+Zz3nPf+gPBuYhISEpSWliZJ8ng8Z/0ZskOHDtUll1xidpiXpKSkaOPGjXrwwQe1efNmtWzZ0vYkIxrzdQYQ+JrSmc95z3nvDwjvJiYsLKzhfnBw8Fmf0xcREWFyklclJiZqx44dSklJ0ezZszVv3jzbk4xozNcZQOBrSmc+5z3nvT/glSsR0L7++mu1atVKd9xxh6KiovTCCy/YngQA8ALOe/gDwhtaunSpJGny5MmWl1x8e/bs0axZsxQUFKSQkBA999xztidZE8hfZwCNF6hnAef9/xeoX+NA4HIcx7E9whtWr16t9evXa/Xq1banGLNgwQIdOnRICxYssD3FmOnTpysxMVHTp0+3PcWY4cOH684779Tw4cNtTwF8hsfj0bJly+TxeGxPMSYmJkaFhYWKiYmxPcWIuro6RUZGqq6uzvYUY0pKSpSZmamSkhLbU3CR8BxvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYA+L3WrVvr1KlTtmcY1b59e9sTAJwnwhuAEW63Wy6Xy8rN7XbbfvjwstraWlVXV9ueYYzjOCoqKlJkZKTtKQDOA+ENwIiysjI5jmPlVlZWZvvhw8tiY2P12Wef2Z5hTEVFhSIiIhQeHm57CoDzQHgDAPze8OHDtWbNGtszjFmzZo1GjBhhewaA80R4AwD83s0336z8/Hx98803tqd4neM4ys7O1tixY21PAXCeCG8AgN8LDw/X3XffrUmTJgX8N1k+99xzOn78uDIyMmxPAXCeCG8AaAJ++OEHnThxwvYMr3riiSf0/fffa968ebaneM2HH36ouXPn6h//+IeaNWtmew6A80R4A0ATsHHjRnXs2FH333+/CgsLbc/xitDQUK1du1Z//etf9dBDD6murs72pItq7dq1uvXWW7Vy5UpdccUVtucAuACENwA0AWPGjNF7772noKAgZWZmqnfv3lqyZIkOHz5se9pF1bZtW+Xn56uwsFB9+/YNiP/JqKys1Lhx4/TQQw9p3bp1GjhwoO1JAC4Q4Q3AuNLSUnXr1s32jCanW7duevLJJ1VRUaFHHnlEeXl5SkhI0NixY3XkyBHb8y6ayy+/XK+99pruvfdeZWRk6LbbbtOWLVvkOI7taeflyy+/1O9//3slJibq0ksv1c6dO9W3b1/bswD8AoQ3AASgVatWKTIyUpGRkRo0aNBpvxYcHKyUlBSlpqaqVatWKiwsDLjnf7tcLk2cOFGff/65rrnmGv32t79Vamqq/vKXv+jTTz/12Qj/5ptv9Morr+iWW25R7969VV9fr61bt2rx4sWKiIiwPQ/AL0R4A7Di5MmTysrKUnJysjIzM1VTU6Ndu3bp6quvVvfu3TVixIiGp0FkZGRoxowZ6tWrl5KSkpSfn6+RI0eqc+fOmj17dsPf8+WXX1afPn2UlpamSZMm6eTJk7YennW/+c1vVFVVpaqqKr311luSpKqqKq1YsUI33nijevbsqa+++ko5OTkqLCxUdHS05cXeERUVpfvuu0+ffvqpnn76ae3cuVM333yz2rZtq9GjR2vJkiX65JNP9O233xr/aSj/+c9/tGfPHr3yyiuaMmWKkpKSlJSUpOzsbP36179WeXm5Fi5cqM6dOxvdBcB7+JZoAFYUFxcrOztbzz//vEaPHq3c3FwtWLBAixYtUnp6uh5++GHNnTtXzzzzjKQfv3Fu+/btevbZZzVs2DAVFBSoVatWuuKKKzRjxgwdPHhQOTk52rp1q0JCQjR16lStWrVK48ePt/tAfcSGDRs0evRo9evXT5MmTdLw4cMVFhZme5YxLpdLAwYM0IABAyT9+EqqmzZtUl5enl588UVVVFToyJEj6tixo+Li4hpusbGxiouLU3R0tMLCws56CwoK0vHjx896O3r0qCoqKlReXq7y8vLT7p88eVLx8fFKTExUenq6Jk2apJSUFAUHB1v+3QLgLYQ3ACsSEhKUlpYmSfJ4PCopKVFlZaXS09MlSRMmTNCoUaMa3n/o0KGSpJSUFCUnJ6tdu3aSpE6dOqmiokJbtmxRQUGBevfuLUmqqalRTEyMwUfk26666ioVFRWpffv2tqf4hPj4eI0fP/60/zE7duyY9u/f3xDG5eXl2rZtm3JycnT48OFzxnWHDh108ODBs0Z5ZGRkQ7x3795dt9xyS8PbUVFRcrlcFn8XAJhGeAOw4r+vtgYHB6uysrJR7x8UFHTaxwYFBam+vl6O42jChAl6/PHHvbLX3yUkJNie4PPCw8OVmJioxMRE21MABCie4w3AJ7Rs2VKXXXaZNm/eLEl66aWXGq5+N8aAAQO0du1aHTx4UNKPLxhTVlbmla0AAFwIrngD8BkrV67U5MmTdezYMXXq1EnLly9v9Md27dpV8+fPV2Zmpk6dOqWQkBAtXrxY8fHxXlwMAEDjEd4AjHO73ae9sMnMmTMb7m/btu2M98/Ly2u4n5GRoYyMjLP+2pgxYzRmzJiLuhUAgIuFp5oAAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYQHgDAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYwAvoADAiPj5eLpfL2ucGAMA2rngDMKK0tFSO41zQrWfPntq+ffsFf3xpaanthw8AAOENAAAAmEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gD8XmlpqZKSkpSVlaXk5GRlZmaqpqbG9iwAAE5DeAMICMXFxZo2bZr27t2rqKgo5ebm2p4EAMBpCG8AASEhIUFpaWmSJI/Hw4vmAAB8DuENICCEhYU13A8ODlZ9fb3FNQAAnInwBgAAAAwgvAEAAAADmtkeAAC/lNvtVmFhYcPbM2fOtLgGAICz44o3AAAAYADhDQAAABhAeAMAAAAGEN4AAACAAYQ3AAAAYADhDQAAABhAeAMAAAAGEN4AAACAAYQ3AAAAYADhDQAAABgQsOEdERGh1q1b255hVGhoqNq0aWN7BgAAaOLcbrdcLpfxm9vttv3Qf1Yz2wO8JSIiQnv27LE9w6iysjJ16NDB9gwAANDElZWVyXEc45/X5XIZ/5znI2CveKelpWnHjh2qrq62PcWY999/X71797Y9AwAAAGcRsOHdunVrXXvttVq3bp3tKUbs27dPhw4dUv/+/W1PAQAAwFkEbHhL0tixY7VkyRKdPHnS9hSvW7x4scaMGaOgoID+kgIAAPitgK6022+/Xc2aNdOcOXNsT/Gq7OxsvfXWW/rDH/5gewoAAADOIWC/uVKSQkJClJOTo969e6tLly4aP3687UkX3T//+U/dd999evfddxUdHW17DgAAAM4hoK94S1KbNm20bt06zZ07VxMnTtSRI0dsT7oo6uvr9eijj2rYsGFasWKFUlNTbU8CAADAzwj48JaklJQU7dq1S8HBwUpNTdWrr76q+vp627MuiOM42rJli6677jpt3rxZO3bs0ODBg23PAgAAOENpaam6detme4bPaBLhLUktWrTQsmXLtHjxYj355JPq1KmTHnvsMX377be2pzXK0aNHtXTpUqWmpmrixImaOHGiNmzYoI4dO9qeBgAAgEZoMuH9k5tvvlkfffSRXnvtNZWVlalLly664YYbNHfuXG3atEm1tbW2J0r68akk27dv11NPPaUhQ4YoLi5OGzdu1NNPP62ioiJlZWXxE0wAAIDPO3nypLKyspScnKzMzEzV1NRo165duvrqq9W9e3eNGDFChw8fliRlZGRoxowZ6tWrl5KSkpSfn6+RI0eqc+fOmj17dsPf8+WXX1afPn2UlpamSZMm+c1PsAvob678OT169NCyZcv01FNPacuWLcrLy9MDDzygvXv3qmfPnrryyisVFxenuLg4xcbGNvw1PDz8om2oq6vT/v37VVFRofLycpWXl6uiokJffvmlPv74Y3Xs2FHp6ekaP368XnzxRcXExFy0zw0AAGBCcXGxsrOz9fzzz2v06NHKzc3VggULtGjRIqWnp+vhhx/W3Llz9cwzz0iSQkNDtX37dj377LMaNmyYCgoK1KpVK11xxRWaMWOGDh48qJycHG3dulUhISGaOnWqVq1a5Rc/RKPJhvdPWrRooUGDBmnQoEGSfnxKxyeffKIvv/xS5eXl2rx582lRHBkZqbi4OHXo0EGXXHKJwsLC1Lx5c4WFhTXcWrdure+//17Hjx8/41ZTU6NvvvlGFRUVOnTokNq3b98Q9nFxcUpNTdWQIUPUu3dvQhsAAPi9hIQEpaWlSZI8Ho9KSkpUWVmp9PR0SdKECRM0atSohvcfOnSopB+/Ry85OVnt2rWTJHXq1EkVFRXasmWLCgoKGl6tu6amxm+aqcmH9//WokULDRgw4Ky/5jiOvvvuO5WXl+urr75SbW2tamtrz4hrSWrevLmioqJOC/KfIr1t27aKjY1Vu3btFBwcbPLhAQAAGBUWFtZwPzg4WJWVlY16/6CgoNM+NigoSPX19XIcRxMmTNDjjz/ulb3eRHifB5fLpZiYGMXExKhXr1625wAAAPidli1b6rLLLtPmzZvVv39/vfTSSw1XvxtjwIABGjZsmGbMmKGYmBj98MMPOnr0qOLj4724+uIgvAEAAGDUypUrNXnyZB07dkydOnXS8uXLG/2xXbt21fz585WZmalTp04pJCREixcvJrwBAADQdLndbhUWFja8PXPmzIb727ZtO+P98/LyGu5nZGQoIyPjrL82ZswYjRkz5qJuNYGfRwcAAAAYQHgDAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYQHgDAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYwCtXAgAA4KKKj4+Xy+Wy8nl9GVe8AQAAcFGVlpbKcZzzvn3wwQdKT0+/oI91HEelpaW2H/rPIrwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAA+IXS0lIlJSUpKytLycnJyszMVE1Nje1ZjUZ4AwAAwG8UFxdr2rRp2rt3r6KiopSbm2t7UqMR3gAAAPAbCQkJSktLkyR5PB6f/9nd/43wBgAAgN8ICwtruB8cHKz6+nqLa84P4Q0AAAAYQHgDAAAABjSzPQAAAABoDLfbrcLCwoa3Z86caXHN+eOKNwAAAGAA4Q0AAAAYQHgDAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYQHgDAAAABhDeAAAAgAGENwAAAGAA4Q0AAAAYQHgDfiY8PFyO49ieYVSLFi1sTwAAK1q2bGl7glGO4ygyMtL2DK8hvAE/43K5VF1dbXuGUQcOHFBERITtGQBgVEREhL766ivbM4yqqqqyPcGrCG/Az3To0EGff/657RnG1NbW6sCBA2rbtq3tKQBgVHR0tKqqqlRZWWl7ijElJSVq37697RleQ3gDfmbYsGFau3at7RnGbNiwQb169VJUVJTtKQBgVEhIiDIzM/Xqq6/anmLM2rVrNWzYMNszvIbwBvzMNddcoyNHjmjPnj22pxiRnZ2tsWPH2p4BAFaMHTtW2dnZtmcYUV5erqKiIt100022p3gN4Q34maCgIE2ZMkXTp0/XiRMnbM/xqo0bN+rDDz/UrbfeansKAFgxZMgQ/fvf/1Zubq7tKV516tQpTZ06VRMnTlRoaKjtOV5DeAN+6IEHHlBERITuv/9+21O85osvvtAdd9yhnJwctWrVyvYcALAiPDxcf//73zV58mQVFhbanuM1f/zjH3X06FHNnz/f9hSvIrwBPxQcHKxVq1bp7bff1u9+9zvV1tbannRRffzxx7rppps0Z84cXX/99bbnAIBVHo9Hf/7znzVo0CBt2rTJ9pyL6sSJE3r44Yf1t7/9TWvWrFFISIjtSV5FeAN+KioqSlu3blV5ebl69eqlnTt32p70i/10AA8dOlRPPPGE7r33XtuTAMAnjBs3TkuXLtXtt9+umTNnBsQFl08//VTXXHONtm/frm3btikmJsb2JK8jvAE/1rp1a61Zs0YPPvigMjMzdfvtt2vr1q1+9wI7lZWVevbZZ5WcnKz8/Hzt3LlTo0aNsj0LAHzK4MGDtXv3bpWWliopKUkLFizQoUOHbM86b/n5+brrrrt03XXXKSsrS2+88YbatWtne5YRhDfg51wul8aNG6fPPvtMffr00V133aW0tDQtWbJEX3zxhc9GeE1Njd5//33dc889SkhI0LZt2/Tiiy/qzTffDOif4QoAv8RPF1xycnK0b98+de7cWRMmTNA777zj0y8+U1ZWphdeeEF9+vTR6NGj1aVLFxUVFWnSpElyuVy25xnjcnz1v8pAI0yfPl2JiYmaPn267Sk+49SpU3rvvfe0YsUKffDBBwoODlZ6eroyMjLUt29fxcfH69JLLzW66eTJkzpw4ICKioq0adMm5eXlaefOnerevbsGDx6siRMn8gI5AH5WXV2dIiMjVVdXZ3uKT/n++++1fPlyvf7669qxY4dSUlKUkZGh9PR0de3aVe3bt1ezZs2MbqqqqlJZWZny8/OVl5enTZs2qbq6WjfccIPGjx+vgQMHKjg42OgmX0F4w68R3j/PcRx9/vnnysvLU15engoKClRRUaGQkBDFxcUpLi5OsbGxDffj4uLUpk0bhYWFKSwsTM2bN2+4/9PB7TiOjh8/fsatqqpK+/fvV0VFhcrLy0+7HThwQNHR0bryyivVv39/ZWRk6Nprr1VkZKTl3yEA/oLw/r8dO3ZM27ZtU15enj788EMVFxfru+++U9u2bc8462NjYxUbG6sWLVo0nPM/3UJDQxUU9OOTIurr68965h86dOi0c/6/z/6amhrFxsaqR48eysjIUEZGhrp06dKkrmyfC+ENv0Z4nz/HcfTDDz+cEcg/vf3dd9+d9ZCVpB49eqigoEChoaFnHNTh4eENB/n/jvoOHTooLCzM8iMH4M8I7wtTV1enr7/++ow4Li8v1/79+1VVVXXGeV9XV6euXbuqqKhIks4478PCwhQdHX3OCzjR0dFE9jmY/bMHANa5XC5FR0crOjpaaWlpjf64+vp6nTx5UqGhoRyoAOAnQkND5Xa75Xa7G/0xjuOorq5OwcHBxp+mEuj43QTQKM2aNeMABoAmwOVy8aeUXsJPNQEAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhvAAAAwADCGwAAADCA8AYAAAAMILwBAAAAAwhv+LXY2Fi1adPG9gwAgJe5XC716NHD9gzgF3E5juPYHgEAAAAEOq54AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIABhDcAAABgAOENAAAAGEB4AwAAAAYQ3gAAAIAB/w/QoWD1z2S9NAAAAABJRU5ErkJggg==\n",
      "text/plain": [
       "<Figure size 720x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from discopy import drawing\n",
    "from pytest import raises\n",
    "\n",
    "# In the original diagram, words appear before the cups\n",
    "print(\"Before normal form:\", diagram.boxes)\n",
    "\n",
    "diagram_nf = diagram.normal_form()\n",
    "print(\"After normal form:\", diagram_nf.boxes)\n",
    "\n",
    "drawing.equation(diagram, diagram_nf, figsize=(10, 4), symbol='->')\n",
    "\n",
    "# In the normalised diagram, boxes are not in the right order\n",
    "# anymore, so cannot be drawn using grammar.draw()\n",
    "with raises(ValueError):\n",
    "    grammar.draw(diagram_nf)"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "In the example above, the application of normal form to the diagram introduces a :term:`cup` before the word \"home\", so the normalised version cannot be drawn with :py:class:`grammar.draw() <discopy.grammar.pregroup.draw>` anymore."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Functors"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "Given :term:`monoidal categories <monoidal category>` :math:`\\mathcal{C}` and :math:`\\mathcal{D}`, a monoidal :term:`functor` :math:`F: \\mathcal{C} \\to \\mathcal{D}` satisfies the following properties:\n",
    "\n",
    "- monoidal structure of objects is preserved: :math:`F(A \\otimes B) = F(A) \\otimes F(B)`\n",
    "- :term:`adjoints <adjoint>` are preserved: :math:`F(A^l) = F(A)^l`, :math:`F(A^r) = F(A)^r`\n",
    "- monoidal structure of morphism is preserved: :math:`F(g \\otimes f) = F(g) \\otimes F(f)`\n",
    "- compositonal structure of morphisms is preserved: :math:`F(g \\circ f) = F(g) \\circ F(f)`\n",
    "\n",
    "Put simply, a :term:`functor` is a structure-preserving transformation. In a free :term:`monoidal category`, applying a :term:`functor` to a diagram amounts to simply providing a mapping for each generating object and morphism. In :term:`DisCoPy`, a :term:`functor` is defined by passing mappings (dictionaries or functions) as arguments ``ob`` and ``ar`` to the :py:class:`~discopy.monoidal.Functor` class.\n",
    "\n",
    ":term:`Functors <functor>` are one of the most powerful concepts in category theory. In fact, the encoding, rewriting and parameterisation steps of ``lambeq``'s :ref:`pipeline <sec-pipeline>` are implemented individually as :term:`functors <functor>`, resulting in an overall functorial transformation from :term:`parse trees <syntax tree>` to :term:`tensor networks <tensor network>` and :term:`circuits <quantum circuit>`. More specifically:\n",
    "\n",
    "- :py:class:`lambeq.CCGParser` uses a :term:`functor` to transform a biclosed CCG diagram to a rigid DisCoCat diagram [YK2021]_.\n",
    "- :py:class:`lambeq.Rewriter` functorially transforms a rigid DisCoCat diagram to a simpler rigid DisCoCat diagram.\n",
    "- :py:class:`lambeq.TensorAnsatz` functorially transforms a rigid DisCoCat diagram to a tensor diagram, which can be evaluated as a tensor network using NumPy, JAX or PyTorch.\n",
    "- :py:class:`lambeq.CircuitAnsatz` functorially transforms a rigid DisCoCat diagram to a :term:`quantum circuit`, for evaluation on a quantum device.\n",
    "\n",
    "Below we present two examples of :term:`functors <functor>`, implemented in :term:`DisCoPy`."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Example 1: \"Very\" functor"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "This :term:`functor` adds the word \"very\" in front of every adjective in a :term:`DisCoCat` diagram. \n",
    "Since the mapping is from a :py:class:`rigid.Diagram <discopy.rigid.Diagram>` to another :py:class:`rigid.Diagram <discopy.rigid.Diagram>`, a :py:class:`rigid.Functor <discopy.rigid.Functor>` should be used. Further, the word \"very\" modifies an adjective to return another adjective, so it should have type \n",
    ":math:`(n \\otimes n^l) \\otimes (n \\otimes n^l)^l = n \\otimes n^l \\otimes n^{ll} \\otimes n^l`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "from lambeq import BobcatParser\n",
    "parser = BobcatParser(verbose='suppress')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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l81mk81mk91uV1hYGENGgDaK4g0AgIEsFkugaEdGRpodB4CBmFwJAAAAGIDiDQAAABiA4g0AAAAYgDHeQdClSxf5/X6zYzQSGxurjh07mh0DAACg3eKIdxAkJiZqzZo1unjxotlRJEnV1dVau3at+vXrZ3YUAACAdoviHQTjxo1TamqqhgwZot27d5uaZfPmzRo0aJAefPBBpaenm5oFAACgPWOoSRBYLBa99dZbWrNmjcaPH6+ePXsqJydHOTk5ysrKUufOnYP22mfOnFFJSYlcLpeKi4t1/vx5rVy5Uvfff3/QXhMAAADXR/EOEovFotzcXE2ePFm7d++Wy+XSb3/7W02dOlUOhyOwlPCVywl37txZdrs9sKKZzWYLLLJw+eflpYS/v4xwZWWlTp48qZMnT2rUqFHKycnRG2+8obS0NFmtVrPfDgAAgHaP4h1kdrtdI0eO1MiRI/WLX/xCtbW1OnLkSKPS7PF4tGvXLnk8Hp07d04+ny9QspOSknT06NHAimY2m00xMTGBon7XXXdp1KhRgfLev39/2e12s3cbAAAAV6B4GywyMlKpqalmxwAAAIDBmFwJAAAAGIDiDQAICA8PV69evcyO0UhYWJi6d+9udgwAuG0UbwBAQGJiojZu3KhTp06ZHUWS5Pf79d577yk+Pt7sKABw2yjeAICAnj176rHHHtPw4cO1adMmU7N89dVX+vGPf6wjR45o7ty5pmYBgJbA5EoAQCNPPfWUhg0bpkcffVRdu3YNrEOQmZmpTp06Be116+vrtX//frlcLrlcLm3fvl0FBQV6++23FREREbTXBQCjULwBAE3ce++9Onr0qHbt2iWXy6Xly5drypQpSkpKUu/evRutP3B569Kli8LDwwNrEFitVvn9/kanSP32228bnUr18qlVT506pQMHDqh79+4aO3asZsyYoTfeeEPdunUz+60AgBZD8QYAXFV4eLhGjx6t0aNH66mnnlJNTY3279+vr7/+OlCc//d//1c7duyQx+PRmTNnGi341a9fPx05ciRQxG02m6Kjo9W9e/dAce/bt68yMjIUFxenlJQUJSQkmL3bABA0FG8AwA3p0KGDMjIyzI4BAK0WkysBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA7T64t2lSxc5nU6zYwDATQsPD9eAAQPMjgEAMIjF7/f7zQ4BAAAAtHWt/og3AAAA0BpQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA1C8AQAAAANQvAEAAAADULwBAAAAA/wffOnS6nK3D/gAAAAASUVORK5CYII=\n",
      "text/plain": [
       "<Figure size 720x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from discopy.rigid import Diagram, Functor\n",
    "\n",
    "# determiners have the same type as adjectives\n",
    "# but we shouldn't add 'very' behind them\n",
    "determiners = ['a', 'the', 'my', 'his', 'her', 'their']\n",
    "\n",
    "# type for an adjective\n",
    "adj = n @ n.l\n",
    "very = Word('very', adj @ adj.l)\n",
    "cups = Diagram.cups(adj.l, adj)\n",
    "\n",
    "def very_ob(ty):\n",
    "    return ty\n",
    "\n",
    "def very_ar(box):\n",
    "    if box != very:\n",
    "        if box.name not in determiners:\n",
    "            if box.cod == adj:\n",
    "                return very @ box >> Id(adj) @ cups\n",
    "    return box\n",
    "\n",
    "very_functor = Functor(ob=very_ob, ar=very_ar)\n",
    "\n",
    "diagram = parser.sentence2diagram('a big bad wolf')\n",
    "new_diagram = very_functor(diagram)\n",
    "\n",
    "drawing.equation(diagram, new_diagram, figsize=(10, 4), symbol='->')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Example 2: Twist functor"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "In this :term:`functor`, :term:`cups <cup>` and :term:`caps <cap>` are treated specially and are not passed to the ``ar`` function; instead they are passed to methods ``ar_factory.cups(left, right)`` and ``ar_factory.caps(left, right)``, respectively. By default, the :py:class:`rigid.Functor <discopy.rigid.Functor>` uses :py:class:`rigid.Diagram <discopy.rigid.Diagram>` to implement the `factory pattern <https://en.wikipedia.org/wiki/Factory_method_pattern>`_, with methods such as ``cups()``, ``caps()``, ``id()``, and ``swap()``. For example, for a functor ``F`` that uses the default arrow factory :py:class:`~discopy.rigid.Diagram`, ``F(Cup(a, a.r)) == Diagram.cups(F(a), F(a.r))``.\n",
    "\n",
    "Here is an example of how to map a :term:`cup` to a custom diagram, such as a \"twisted\" :term:`cup`. Note that it is up to the user to ensure the new :term:`cups <cup>` and :term:`caps <cap>` satisfy the :term:`snake equations`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 288x144 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from discopy.rigid import Functor\n",
    "from discopy import Diagram\n",
    "\n",
    "def twist_ob(ty):\n",
    "    return ty\n",
    "\n",
    "def twist_ar(box):\n",
    "    return box\n",
    "\n",
    "class TwistedDiagram(Diagram):\n",
    "    @staticmethod\n",
    "    def cups(left, right):\n",
    "        swaps = Diagram.swap(left, right)\n",
    "        cups = Diagram.cups(right, left)\n",
    "        return swaps >> cups\n",
    "\n",
    "    @staticmethod\n",
    "    def caps(left, right):\n",
    "        return TwistedDiagram.cups(left, right).dagger()\n",
    "\n",
    "\n",
    "twist_functor = Functor(ob=twist_ob, ar=twist_ar, ar_factory=TwistedDiagram)\n",
    "\n",
    "diagram = parser.sentence2diagram('This is twisted')\n",
    "new_diagram = twist_functor(diagram)\n",
    "\n",
    "grammar.draw(diagram)\n",
    "grammar.draw(new_diagram)\n",
    "\n",
    "snake = Id(n) @ Cap(n.r, n) >> Cup(n, n.r) @ Id(n)\n",
    "drawing.equation(twist_functor(snake), Id(n), figsize=(4, 2))"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    ".. note::\n",
    "    \n",
    "   Twisting the nested :term:`cups <cup>` for \"is\" and \"twisted\" together is **not** a functorial operation, so it cannot be implemented using a :py:class:`rigid.Functor <discopy.rigid.Functor>`."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Classical DisCoCat: Tensor networks"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "The classical version of :term:`DisCoCat` sends diagrams in the :term:`category` of pregroup derivations to tensors in the :term:`category` of vector spaces **FVect**. **FVect** is a :term:`monoidal category` with vector spaces (e.g. :math:`\\mathbb{R}^2 \\otimes \\mathbb{R}^2`) as objects and linear maps between vector spaces as morphisms. It is in fact a :term:`compact closed category`, which is a special case of rigid categories where :math:`A^l = A^r = A^*`.\n",
    "\n",
    "Using the :py:mod:`discopy.tensor` module, you can define a free :term:`category` of vector spaces: objects are defined with the :py:class:`~discopy.tensor.Dim` class and morphisms with the :py:class:`~discopy.tensor.Box` class. Composite morphisms are constructed by freely combining the generating morphisms using the ``<<`` and ``>>`` operators. This is similar to how :py:class:`rigid.Diagram <discopy.rigid.Diagram>`\\ s and :py:class:`monoidal.Diagram <discopy.monoidal.Diagram>`\\ s are defined. The concrete value of the tensor is passed to the ``data`` attribute as an unshaped list; :term:`DisCoPy` will reshape it later based on the input and output dimensions.\n",
    "\n",
    "Apart of diagrams, the :py:mod:`discopy.tensor` module has another class that can be tensored and composed: :py:class:`tensor.Tensor <discopy.tensor.Tensor>`. The key difference is that :py:class:`tensor.Box <discopy.tensor.Box>`\\ es in the diagrams compose together to make :py:class:`tensor.Diagram <discopy.tensor.Diagram>`\\ s, while :py:class:`tensor.Tensor <discopy.tensor.Tensor>`\\ s compose together to make another :py:class:`tensor.Tensor <discopy.tensor.Tensor>`. In other words, :py:class:`tensor.Tensor <discopy.tensor.Tensor>` computes tensor contractions directly, while :py:class:`tensor.Diagram <discopy.tensor.Diagram>` delays the computation until :py:meth:`~discopy.tensor.Diagram.eval` is called."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Dim(1) @ Dim(2) @ Dim(3)=Dim(2, 3)\n"
     ]
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 288x72 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[[1 0]\n",
      " [0 1]]\n"
     ]
    }
   ],
   "source": [
    "from discopy.tensor import Box, Tensor, Id, Dim\n",
    "\n",
    "# Dim(1) is the unit object, so disappears when tensored with another Dim\n",
    "print(f'{Dim(1) @ Dim(2) @ Dim(3)=}')\n",
    "\n",
    "id_box = Box('Id Box', Dim(2), Dim(2), data=[1,0,0,1])\n",
    "id_tensor = Tensor(Dim(2), Dim(2), array=[1,0,0,1])\n",
    "\n",
    "# the actual values of id_box and id_tensor are equal\n",
    "assert (id_box.array == id_tensor.array).all()\n",
    "drawing.equation(id_box, id_tensor, figsize=(4, 1))\n",
    "print(id_box.array)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x144 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Tensor(dom=Dim(2, 2), cod=Dim(2), array=[0., 1., 2., 3., 4., 5., 6., 7.])\n",
      "[[[0. 1.]\n",
      "  [2. 3.]]\n",
      "\n",
      " [[4. 5.]\n",
      "  [6. 7.]]]\n"
     ]
    }
   ],
   "source": [
    "f_box = Box('f Box', Dim(2, 2), Dim(2), data=range(8))\n",
    "f_tensor = Tensor(Dim(2, 2), Dim(2), array=range(8))\n",
    "\n",
    "combined_diagram = id_box @ Id(Dim(2)) >> f_box\n",
    "combined_tensor = id_tensor @ Tensor.id(Dim(2)) >> f_tensor\n",
    "\n",
    "# tensor diagram evaluates to the tensor\n",
    "assert combined_diagram.eval() == combined_tensor\n",
    "drawing.equation(combined_diagram, combined_tensor, figsize=(6, 2))\n",
    "print(combined_tensor)\n",
    "print(combined_tensor.array)"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "In the :term:`category` of vector spaces, :term:`cups <cup>`, :term:`caps <cap>` and :term:`swaps <swap>` take on concrete values as tensors."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array([[1., 0., 0.],\n",
       "       [0., 1., 0.],\n",
       "       [0., 0., 1.]])"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Tensor.cups(Dim(3), Dim(3)).array"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array([[[[1., 0.],\n",
       "         [0., 0.]],\n",
       "\n",
       "        [[0., 0.],\n",
       "         [1., 0.]]],\n",
       "\n",
       "\n",
       "       [[[0., 1.],\n",
       "         [0., 0.]],\n",
       "\n",
       "        [[0., 0.],\n",
       "         [0., 1.]]]])"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Tensor.swap(Dim(2), Dim(2)).array"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "To implement a :term:`functor` from :py:class:`rigid.Diagram <discopy.rigid.Diagram>` to :py:class:`tensor.Tensor <discopy.tensor.Tensor>`, use a :py:class:`tensor.Functor <discopy.tensor.Functor>`. This :term:`functor` will automatically contract the resulting :term:`tensor network`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\"This\" becomes\n",
      "[1. 1.]\n",
      "\"is\" becomes\n",
      "[[[[1. 1.]\n",
      "   [1. 1.]]\n",
      "\n",
      "  [[1. 1.]\n",
      "   [1. 1.]]]\n",
      "\n",
      "\n",
      " [[[1. 1.]\n",
      "   [1. 1.]]\n",
      "\n",
      "  [[1. 1.]\n",
      "   [1. 1.]]]]\n",
      "\"twisted\" becomes\n",
      "[[1. 1.]\n",
      " [1. 1.]]\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "Tensor(dom=Dim(1), cod=Dim(2), array=[8., 8.])"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from discopy.tensor import Functor\n",
    "import numpy as np\n",
    "\n",
    "def one_ob(ty):\n",
    "    dims = [2] * len(ty)\n",
    "    return Dim(*dims) # does Dim(2,2,..)\n",
    "\n",
    "def one_ar(box):\n",
    "    dom = one_ob(box.dom)\n",
    "    cod = one_ob(box.cod)\n",
    "    tensor = np.ones(dom @ cod)\n",
    "    print(f'\"{box}\" becomes')\n",
    "    print(tensor)\n",
    "    return tensor\n",
    "\n",
    "one_functor = Functor(ob=one_ob, ar=one_ar)\n",
    "one_functor(diagram)"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "Sometimes, defining a :term:`functor` from :py:class:`rigid.Diagram <discopy.rigid.Diagram>` to :py:class:`tensor.Diagram <discopy.tensor.Diagram>` offers more flexibility, since a :py:class:`tensor.Diagram <discopy.tensor.Diagram>` can be instantiated with concrete values to be evaluated later using a custom tensor contractor. Such a functor can be defined using a :py:class:`rigid.Functor <discopy.rigid.Functor>` with :py:class:`tensor.Dim <discopy.tensor.Dim>` and :py:class:`tensor.Diagram <discopy.tensor.Diagram>` as ``ob_factory`` and ``ar_factory``, respectively. See the implementation of :py:class:`.TensorAnsatz` for an example."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Quantum DisCoCat: Quantum circuits"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "The quantum version of :term:`DisCoCat` sends diagrams in the :term:`category` of pregroup derivations to :term:`circuits <quantum circuit>` in the category of Hilbert spaces **FHilb**. This is a :term:`compact closed <compact closed category>` monoidal category with Hilbert spaces (e.g. :math:`\\mathbb{C}^{2^n}`) as objects and unitary maps between Hilbert spaces as morphisms.\n",
    "\n",
    "The :py:mod:`discopy.quantum` module is a framework for the free :term:`category` of :term:`quantum circuits <quantum circuit>`: objects are generated using the :py:class:`quantum.circuit.Ob <discopy.quantum.circuit.Ob>` class and morphisms by using :py:mod:`quantum.gates <discopy.quantum.gates>`. In :term:`DisCoPy`, rotation values range from :math:`0` to :math:`1` rather than from :math:`0` to :math:`2\\pi`. The circuit can then either be evaluated using tensor contraction with the :py:meth:`~discopy.quantum.circuit.Circuit.eval` method, or exported to :term:`pytket` using the :meth:`~discopy.quantum.circuit.Circuit.to_tk` method, which supports multiple hardware backends."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/plain": [
       "tk.Circuit(4).CX(1, 2).X(3).CX(0, 1).CX(2, 3).Rz(0.2, 0).Rz(0.4, 1).Rz(0.6, 2).Rz(0.8, 3)"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from discopy.quantum import qubit, Id\n",
    "from discopy.quantum.gates import CX, Rz, X\n",
    "\n",
    "circuit = Id(4)\n",
    "circuit >>= Id(1) @ CX @ X\n",
    "circuit >>= CX @ CX\n",
    "circuit >>= Rz(0.1) @ Rz(0.2) @ Rz(0.3) @ Rz(0.4)\n",
    "\n",
    "# from discopy 0.4.1, can do:\n",
    "same_circuit = (Id(4).CX(1, 2).X(3).CX(0, 1).CX(2, 3)\n",
    "                .Rz(0.1, 0).Rz(0.2, 1).Rz(0.3, 2).Rz(0.4, 3))\n",
    "assert circuit == same_circuit\n",
    "\n",
    "circuit.draw()\n",
    "circuit.to_tk()"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "To apply multi-qubit :term:`gates <quantum gate>` to non-consecutive :term:`qubits <qubit>`, use :term:`swaps <swap>` to permute the wires, apply the :term:`gate <quantum gate>`, then unpermute the wires. These :term:`swaps <swap>` are only logical swaps and do not result in more gates when converted to :term:`tket` format."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 216x216 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/plain": [
       "tk.Circuit(3).CX(2, 0)"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from discopy import Circuit\n",
    "from discopy.quantum.gates import SWAP\n",
    "\n",
    "# to apply a CNOT on qubits 2 and 0:\n",
    "circuit1 = Id(3)\n",
    "circuit1 >>= SWAP @ Id(1)\n",
    "circuit1 >>= Id(1) @ SWAP\n",
    "circuit1 >>= Id(1) @ CX\n",
    "circuit1 >>= Id(1) @ SWAP\n",
    "circuit1 >>= SWAP @ Id(1)\n",
    "\n",
    "# or you can do\n",
    "perm = Circuit.permutation([2, 0, 1], inverse=True)\n",
    "circuit2 = perm >> Id(1) @ CX >> perm[::-1]\n",
    "\n",
    "assert circuit1 == circuit2\n",
    "circuit1.draw(figsize=(3, 3))\n",
    "\n",
    "# no swaps introduced when converting to tket\n",
    "circuit1.to_tk()"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "Since discopy 0.4.0, we have long-ranged controlled gates."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 216x144 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 216x144 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from discopy.quantum import Controlled, Rz, X\n",
    "(Controlled(Rz(0.5), distance=2) >> Controlled(X, distance=-2)).draw(figsize=(3, 2))\n",
    "Controlled(Controlled(X), distance=2).draw(figsize=(3, 2))"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "So far, our :term:`circuits <quantum circuit>` have been \"pure\" circuits, consisting of unitaries. Pure circuits can be evaluated locally to return a :py:class:`~discopy.tensor.Tensor`. Circuits containing :py:class:`~discopy.quantum.circuit.Discard`\\ s and :py:class:`~discopy.quantum.circuit.Measure`\\ s are considered \"mixed\", and return :py:mod:`CQMap <discopy.quantum.cqmap>`\\ s instead of :py:class:`~discopy.tensor.Tensor`\\ s when evaluated, as they are not unitaries but rather classical-quantum maps (for more details, see Chapter 5 in [HV2013]_)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "C(Dim(2, 2)) @ Q(Dim(2, 3))\n",
      "CQMap(dom=Q(Dim(2)), cod=CQ(), array=[1.+0.j, 0.+0.j, 0.+0.j, 1.+0.j])\n",
      "CQMap(dom=Q(Dim(2)), cod=C(Dim(2)), array=[1.+0.j, 0.+0.j, 0.+0.j, 0.+0.j, 0.+0.j, 0.+0.j, 0.+0.j, 1.+0.j])\n",
      "Tensor(dom=Dim(1), cod=Dim(2), array=[1.+0.j, 0.+0.j])\n",
      "CQMap(dom=CQ(), cod=C(Dim(2)), array=[1.+0.j, 0.+0.j])\n"
     ]
    }
   ],
   "source": [
    "from discopy import Discard, Measure, Ket\n",
    "from discopy import C, Q\n",
    "\n",
    "print(C(Dim(2)) @ Q(Dim(2, 3)) @ C(Dim(2)))\n",
    "\n",
    "print(Discard().eval())\n",
    "print(Measure().eval())\n",
    "print(Ket(0).eval())\n",
    "# circuits that have measurements in them are no longer unitary\n",
    "# and return CQMaps\n",
    "print((Ket(0) >> Measure()).eval())"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "Pure :term:`circuits <quantum circuit>` can be coerced to evaluate into a :py:mod:`CQMap <discopy.quantum.cqmap>` by setting ``mixed=True``."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "CQMap(dom=Q(Dim(2, 2)), cod=Q(Dim(2, 2)), array=[1.+0.j, 0.+0.j, 0.+0.j, ..., 0.+0.j, 0.+0.j, 0.+0.j])"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "CX.eval(mixed=True)"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "Note that the tensor order of :py:mod:`CQMap <discopy.quantum.cqmap>`\\ s is doubled, compared to that of simple :py:class:`~discopy.tensor.Tensor`\\ s:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(2, 2, 2, 2)\n",
      "(2, 2, 2, 2, 2, 2, 2, 2)\n"
     ]
    }
   ],
   "source": [
    "print(CX.eval().array.shape)\n",
    "print(CX.eval(mixed=True).array.shape)"
   ]
  },
  {
   "cell_type": "raw",
   "metadata": {
    "raw_mimetype": "text/restructuredtext"
   },
   "source": [
    "To implement a :term:`functor` from :py:class:`rigid.Diagram <discopy.rigid.Diagram>` to :py:class:`quantum.Circuit <discopy.quantum.circuit.Circuit>`, use a :py:class:`quantum.circuit.Functor <discopy.quantum.circuit.Functor>`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAk4AAAJOCAYAAABBWYj1AAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjUuMSwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy/YYfK9AAAACXBIWXMAAAsTAAALEwEAmpwYAABNQ0lEQVR4nO3deVxVdeL/8fdFliHDJnLDBc1Ax8AUA7GyBtTijguomUuDjnwznWlxYkqbgsoKZloctWxqZLIor0sN5a5kZpi4IH7FSmwhS1HDpShBUlA4vz/6yTcmscNy77ng6/l4+Mc5fD6e95k7xNvP+XCvzTAMQwAAAPhFHlYHAAAAaCooTgAAACZRnAAAAEyiOAEAAJhEcQIAADCJ4gQAAGASxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABMojgBAACYRHECAAAwieIEAABgEsUJAADAJIoTAACASRQnAAAAkyhOAAAAJlGcAAAATKI4AQAAmERxAgAAMIniBAAAYBLFCQAAwCSKEwAAgEkUJwAAAJMoTgAAACZRnAAAAEyiOAEAAJhEcQIAADCJ4gQAAGASxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABMojgBAACYRHECAAAwieIEAABgEsUJAADAJIoTAACASRQnAAAAkyhOAAAAJlGcAAAATKI4AQAAmERxAgAAMIniBAAAYBLFCQAAwCSKEwAAgEkUJwAAAJMoTgAAACZRnAAAAEyiOAEAAJhEcQIAADCpSRen8vJyzZw5Uxs2bLA6CgAAuAg02eJ07NgxDR48WNu3b1d8fLzmzZsnwzCsjgUAAJqxJlmcPv74Y0VGRioqKkpr167Vtm3bNH/+fP3pT3/SmTNnrI4HAACaKZvRxJZpVq5cqTvuuEPPP/+8xo8fX32+pKREt99+u8rKypSRkaErrrjCwpQAAKA5ajIrToZh6Omnn9Zdd92lNWvWaPz48crMzFSPHj0UFBSkF198UStWrFB4eLgiIyP1ySefWB0ZAAA0M01ixen06dOaOnWq9uzZoxUrVqhTp06qrKxU9+7d9e6776pTp06KiIjQkiVLdPXVVys9PV0zZszQ66+/LrvdbnV8AADQTLj9itPRo0c1cOBAnTp1Sps3b1anTp0kSTt27FBQUJC6desmb29vjRs3TitWrJAkTZo0ScuWLVNCQoLmzp3LpnEAANAo3Lo47d69W/369dMtt9yipUuX6pJLLqn+2uHDh9W5c+fq406dOunw4cPVxzfccIO2bdumV155RVOmTFFFRYVLswMAgObHbYvTsmXLdPPNN+vZZ5/VzJkz5eFR96hdu3bVli1bdOzYMd1888365ptvnJAUAABcLNyuOBmGob/97W+aNm2a1q1bpzFjxpx3XMeOHXXw4MHq40OHDqljx44/G+fn56dly5bp+uuvV2RkpPLz852WHQAANG9utTn81KlTmjx5sj7//HMtX778vEXonLNnz6p79+5677331LFjR0VERGjx4sUKCQmpdc7ChQt1//3369VXX9XQoUOdcQsAAKAZc5sVp6KiIkVFRamyslKbNm26YGmSJE9PT73wwguKiYlRz549NWbMmAuWJkmaMGGCVqxYoTvvvFOzZs1i0zgAAKgTt1hx2rVrl0aMGKE777xTycnJstlsTr1eYWGhYmNj1bdvX7300kvy8fFx6vUAAEDz4BbF6dprr9WHH36otm3b1nluZWWlPDw86ly2ysvLVVxcrNdee00TJ06s83UBAMDFxy2K03fffadTp07Va+7tt9+uO++8U9HR0fWa37p1a3l7e9drLgAAuLh4Wh1Aki6//HJdfvnl9Zr7q1/9SldccYU6dOjQyKkAAABqcpvN4QAAAO6O4gQAAGASxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABMojgBAACYRHECAAAwieIEAABgEsUJTcLBgwd17bXXql+/fjp8+LDVcVxmyZIluvTSSzVz5kxVVVVZHcclysrKdNttt6lTp07Kzc21Oo7L5ObmqlOnTrrttttUVlZmdRwAtaA4we3l5OSof//+Gjt2rEaOHKnIyMhm/wO1qqpKjzzyiB566CEtX75c69ev17hx4/TDDz9YHc2pDh06pBtvvFGXXHKJZs+erSFDhmjp0qVWx3K6pUuXasiQIZo9e7YuueQS3XjjjTp06JDVsQCcj9HExcTEGOvWrbM6BpzE4XAYrVu3NlauXFl9btmyZUbr1q2NpUuXWpjMeU6ePGmMGjXKuOGGG4yjR48ahmEYp06dMiZMmGD07dvXOHjwoMUJnWP79u1Ghw4djKefftqoqqoyDMMwdu/ebXTp0sVITk42KisrLU7Y+CorK43k5GSjS5cuxu7duw3DMIyqqirj6aefNjp06GBs377d4oQA/hsrTnBLVVVVevjhh5WcnKyNGzfKy8tLPXr0UFBQkD799FNt2LBBM2bM0GOPPdasHmEdPHhQAwYMkJ+fn9577z3t2rVLPXr0UGhoqHr27KkxY8aof//+2rFjh9VRG9XixYs1bNgwvfTSS5oxY4beeecd9ejRQ7feeqvi4+O1ceNGjRkzplk9wiorK9OYMWO0ceNG5eTkqKioSD169FBwcLCqqqr00ksvadiwYVq8eLHVUQH8lNXNraFYcWp+SktLjREjRhg33nijcezYMePs2bNGt27djH379hnl5eXGNddcY+Tn5xtHjhwxrrvuOmP06NFGWVmZ1bEbbNu2bUaHDh2MZ5991qiqqqr1vlesWGG0bt3aWLx4sdWRG6yystJISkoyunbtanz00UeGYRjnve+8vDxj4sSJRlhYmFFYWGhx6oYrLCw0wsLCjIkTJxqnT5+u9bX+6KOPjK5duxpJSUnNcsUNaIpYcYJbOXDggG644Qb5+/trw4YNatOmjXbs2KGgoCB169ZN3t7eGjdunFasWKF27drp/fffbxZ7QhwOh2JjYzV//nw98MADstlstd53bGys3nvvPT388MN65JFHmuyK28mTJzV69Ght2rRJO3bsUK9evSTpvPe9bt06paena/z48erfv79ycnIsTl9/5/bsjR8/Xunp6fLx8an1te7Vq5d27NihTZs2afTo0Tp58qTV8YGLHsUJbmPr1q267rrrNGnSJL388svy9vaWJB0+fFidO3euHtepU6fq36zz8fFRenq6xo4dq8jIyCb3A7WqqkoPPfSQHn30UW3cuFHDhg2r/tqF7vuaa65RTk6O3n///Sb5W1iFhYUaMGCAfv3rX1cX5HNqu2+bzabp06dr/vz5Gj58uBYtWmRF9AZZtGiRhg8frvnz52v69Omy2WySLvxat2nTRhs2bNCvf/1rDRgwQIWFhZZkB/AjihPcwuuvv64RI0ZowYIFSkxMrP6BYobNZtOMGTP00ksvafjw4U1mT8jJkyc1atQobd26VTt27FBoaGid5rdt21bvvfeeWrVqpQEDBujgwYNOStq4tm3bpv79+2vChAlasGCBfHx86jR/2LBh2rhxox555BE9/PDDTWLF7dyevUceeeRnBdkMHx8fLViwQBMmTFD//v21bds2JyUF8EsoTrBUZWWlHnzwQT3xxBPKysrS7373u5+N6dixY41ScOjQIXXs2PFn4849wkpKSlJycrJb/0A990iydevWevfdd9W6deufjTFz3z4+PnrllVcUHx+v/v37a/v27U7P3hALFy5UXFycXn75Zd1///3nLchm7js0NFQ5OTnKzs7Wrbfe6taPsE6ePKlbb71V2dnZysnJOW9BNnPPNptN999/v15++WXFxcVp4cKFTs8O4Dys3mTVUGwOb7pKSkqM4cOHG1FRUcY333xT67gzZ84YV155pfHll19Wb5zds2dPreOPHTtmDBgwwBg5cqRRWlrqjOgNkp2dbQQEBBhz5syp/rX786nrfa9evdpo06aNsXDhQmfEbpDKykrjwQcfNLp163bBezCMut13eXm5cccddxjXXHONsX//fmdEb5D9+/cb11xzjXHHHXcY5eXltY6r62u9Z88eo1u3bsaDDz7IpnHAxShOsMRXX31lhIaGGlOmTLngD5Rz1qxZYwQHBxvdunUzUlJSfnH86dOnjYSEBKN3797GgQMHGiNyo0hPTzfatGljrF271tT4ut73nj17jCuvvNL461//6jY/UEtKSozY2FjjpptuMo4fP25qTl3uu6qqypg9e7YREBBgbNmypTEiN4otW7YYAQEBxuzZsy9YkM+p62t9/Phx46abbjJiY2ONkpKSxogMwASKE1xu8+bNRvv27Y3nnnvO1A+U+qqqqjJmzZplBAQEGFu3bnXadcw4e/asMX36dOOqq64y9u7d69RrnfuBGhcXZ/mK2/79+41evXoZkydPNlWQG2Lt2rVGmzZtjNdee82p1zHjtddeq1NBrq/y8nJj8uTJRq9evdxyxQ1ojmyGYRhWPy5sCLvdrvvuu092u93qKDBh8eLFmjRpkqZMmaKYmBiXXHPt2rV65ZVXtHDhQo0ZM8Yl1/yp8vJyjR49Wlu2bNHs2bN1xRVXOP2aFRUVSkpKko+Pj9555x21b9/e6df8bzt37tSQIUMUFhamu+++u04b/utr7969Sk5O1owZM5Samur0651PcnKynn76aaWkpOjqq692+vUMw9A///lP5eXlac2aNYqIiHD6NYGLmafVAXBxKS8vV0xMjA4cOKC0tLQ6zf3666/l4eFRrxJwyy23qLy8vM7zGoOXl5f8/Px0ww036K233qrz/I8//li/+c1v5OXlVad5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v92sHs/9t6SkJElSSEiI4uPjVVpaKi8vL+Xm5srhcMjhcCgxMbF6HADrseIEwO34+fnJz8+vWZcm6cfHkMnJycrLy5Ofn58OHTqk/fv3KyEhQX5+fsrLy1NycnKte78AuB4rTgBgscDAQKWkpOijjz7S5MmTFRsba3UkALVgxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABMojgBAACYRHECAAAwieIEAABgEsUJAADAJIoTAACASRQnAABcyDAMvfzyy5o/f74Mw7A6jst8++23uv/++7Vnzx6rozQIxQkAABepqKjQ1KlT9dxzz+mll17SHXfcofLycqtjOd0nn3yi/v37q7CwUNHR0Vq9erXVkeqN4gQAgAt8++23uuWWW3TkyBFt3bpV2dnZ+u677zR48GAdP37c6nhOk5mZqd/+9rd6+OGH9Z///EerVq3S1KlT9eyzzzbJFTeKEwAATrZ3717169dPkZGRWrZsmfz8/HTppZfqrbfe0k033aR+/frp448/tjpmozIMQ88995wSEhL09ttvKyEhQZLUv39/bd++XYsXL1ZCQkKTW3GjOAEA4ERr165VVFSUHn30UT399NNq0aKFMjMz1aNHD3Xv3l1+fn5KSUnRwIEDtWrVKqvjNoqKigpNmTJFL7/8srZt26YBAwZU33NQUJAWLVqk7OxslZaWauDAgTp27JjVkU2jOAEA4ASGYWj27NmaPHmyli9frj/84Q+SpMrKSt19991at26d9u7dqyVLligsLEyrV6/WH//4Rz3zzDNN8hHWOd98841uueUWHT16VFu3blXXrl3Pe88HDhzQf/7zHw0aNEj9+vXTRx99ZHV0UyhOAAA0soqKCk2ePFmvvfaatm3bpuuvv776azt27FBQUJC6desmb29vjRs3TitWrFBkZKS2b9+upUuXatKkSU3uEZYk5efnKzIyUv37969+JCnVfs8eHh564okn9NRTT2nQoEFasWKFxXfwyyhOAAA0ouPHj2vw4MEqLi7Wli1b1KVLlxpfP3z4sDp37lx93KlTJx0+fFiS1LlzZ23evFllZWWKjo7W0aNHXZq9IdasWaPo6Gg99thjeuqpp9SiRYvqr13oniVp3LhxWrNmje6++279/e9/d+sVN4oTAACNZM+ePYqMjNSAAQP01ltv6dJLL63z39GyZUu9+eabGjx4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du3a1Xgkdz5t2rTRiBEjGhYMqAeKEwCgwbp06SKbzWbZtQFXoTgBABps//79VkcAXII9TgAAACZRnAAAAEyiOAEAAJhEcQIAADCJ4gQAAGASxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABM4iNXADjFN998o23bttVr7o4dO3T06FGtWrWqXvM7dOiga6+9tl5zAVzY+++/r5MnT9Zr7qlTp7Rhwwa1adOmXvNjYmLk7e1dr7mNheIEwCneeecdxcfHq0+fPurUqVOd5hqGoTZt2igtLa1O8yorK/Xuu+/quuuu0wcffFCnuQB+WUVFhW677TadPXtWN954Y53nR0RE6O23367zB0Ln5+dr//79ysvLU+/evet83cZEcQLgFLfffru++eYbPfXUU5o3b54GDBjg1OuVlpbq9ttv14ABA5SRkeHUawEXK29vb2VnZ2v48OEKDg7Ws88+qxYtWjj1mgsXLtT999+v1atXW16aJPY4AXASm82mP//5z3r11Vc1atQopaenm56bmZmpHj16KCgoSE899dQvjv/qq690/fXXq0OHDnrnnXd0xRVXNCA5gAv5zW9+o5ycHH344YcaNmyYTpw4YWpeXb+vKysr9de//lUzZ87U+++/ryFDhjQ0eqOgOAFwKrvdrk2bNiklJUUPPPCAKisrLzi+srJSd999t9atW6e9e/dqyZIl2rt3b63jN2/erOuvv1533nmn/vWvf1m+/wG4GPj7+yszM1NXXnmlrrvuOu3bt++C4+v6fV1aWqqRI0dq27ZtysnJUUhISGPfQr1RnAA4Xc+ePZWTk6Ndu3YpLi5OJSUltY7dsWOHgoKC1K1bN3l7e2vcuHFasWLFece+8soruvXWW/Xaa69p2rRpdd43AaD+vLy89OKLL+qee+7RDTfcoKysrFrH1uX7ev/+/brhhhvUrl07vfvuu2rdurWT7qB+KE4AXOKKK67QO++8o86dO+v666/Xl19+ed5xhw8fVufOnauPO3XqpMOHD9cYU1lZqfvvv19PPfWUNm/erFtuucWp2QHU7q677tKiRYs0duzYWn+hw8z3tSRlZ2fruuuu0x133KG0tDS3XEGmOAFwmXP/Qv3jH/+o66+/Xps2barz33HixAkNHz5cH374obZv364ePXo4ISmAuhg0aJCys7M1e/ZsTZs2TWfPnq3z35Genq5Ro0bp1Vdf1Z///Ge3XUGmOAFwKZvNpnvuuUcLFy7UbbfdppdffrnG1zt27KiDBw9WHx86dEgdO3aUJO3bt0/XXXedrrzySq1bt07+/v4uzQ6gdsHBwdq+fbs+++wzDR06VN9//3311y70fV1ZWakHHnhAKSkp2rRpk+x2u6uj1wnFCYAlbr75Zm3evFnPPPOMEhMTqzeNR0REqKCgQF999ZUqKiq0dOlSxcbGKisrSzfccIPuuece/fOf/5SXl5fFdwDgv/3617/WmjVr9Jvf/Eb9+/dXQUGBpNq/r0tKShQXF6ddu3YpJydHPXv2tPgOfhnFCYBlevTooZycHO3Zs6f615o9PT31wgsvKCYmRj179tSYMWO0detWjR07VosWLdJdd91ldWwAF+Dp6annnntOf/nLXzRgwABt3LjxvN/Xvr6+uv7669W5c+cm9TYiFCcAlrr88su1du1aXXXVVdW/1jxkyBB9/vnn+uyzz3Ts2DH94x//UHZ2tgYNGmR1XAAmTZkyRUuXLtXtt9+ul156qfr7et++fbrxxht1ww036I9//KNefPHFJrWCTHECYDkvLy+98MILuvfee6t/rfn777/XsGHD9Omnn2r79u0KDg62OiaAOoqOjlZ2drbmzZune+65R2fPntWCBQt022236fXXX9c999zjtpvAa8NHrgBwG3/605/Uo0cPjR07Vr6+voqLi9M//vEPeXrynyqgqQoKCtK2bds0fvx49ezZUx4eHtq8ebO6d+9udbR64b9GANzKwIEDtXXrVn322Wdu8xELABrmsssu06pVq/Tmm2/Kbrfr8ssvtzpSvVGcALidq666SldddZXVMQA0ohYtWmj8+PFWx2gw9jgBAACYRHECAAAwieIEAABgEsUJAADAJIoTAACASRQnAAAAkyhOAAAAJlGcAAAATKI4AQAAmERxAgAAMKnJf+RK69at5eFB/7sY+Pr68mGvAABLNfmfQt98842qqqqsjgEnKiws1Pz58zVr1ixVVVXptddeU1xcnKZOnarAwECr4wEALiJNfqmmoqJChYWFKi4utjoKGplhGEpJSVFYWJjKysoUGhqq8PBwpaenq6ysTGFhYUpJSZFhGFZHBQBcJJpscSooKJDdbldWVpbuu+8+dejQQXa7XQUFBVZHQyNJTU1VRkaG8vPzNXfuXPn5+cnHx0fh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3YrTT40dO1Zr1qzR3Xffrb///e/66TsndOzYUQcPHqw+PnTokDp27Fjj+MYbb9SvfvUrvf/++5QmNxceHq7t27dr2bJlio+P16lTp6q/9kuv9Q8//KBx48Zp7dq1ysnJoTQBAJzGrYuTJEVERCgnJ0dvv/22Jk6cqNOnT1efLygo0FdffaWKigotXbpUsbGxkn7cE9O/f3+NGTNGr732mn71q19ZeQswqWPHjvrggw9UVVWlqKgoFRUVSbrwa3348GH99re/lZeXl7KysijIAACncvviJP34A3XTpk06c+aMoqOjdeTIEXl6euqFF15QTEyMevbsqTFjxigkJERLlizR0KFD9eKLL+rBBx9kj0sT4+vrq8WLF2vYsGGKjIzUrl27an2tc3Nz1b9/f916661auHAhBRkA4HRu8c7hZhmGoZSUFL388stavnx5jUcyVVVVeuyxx+RwOLRixQpdc801FiZFY3jrrbf0xz/+Uf/6179066231vjaG2+8oXvvvbfe+9+aEt45HADch1tuDq+NzWbTI488op49eyomJkb/+te/NGrUKJWVlWnixIk6evSocnJy1LZtW6ujohHceuut6tatm+Li4pSfn69HHnlEhmFo5syZev311/Xuu++qd+/eVscEAFxEmlRxOmf06NHq1q2bRowYoZ07d2rdunXq06ePFi9ebOpdqNF0hIWFKScnRyNHjtTevXt19uxZFRUVKScnR+3atbM6HgDgItMk9jidT9++fZWTk6M9e/YoPj5er7zyCqWpmQoICFBWVpYuu+wytWnTRhs3bqQ0AQAs0aT2OAEXI/Y4AYD7aLIrTgAAAK5GcQIAADCJ4gQAAGASxQkAAMAkihPg5q655hp5ejbJdw4BgGaH36oDAAAwiRUnAAAAkyhOAAAAJlGcAAAATKI4AQAAmERxAgAAMIniBAAAYBLFCQAAwCSKEwAAgEkUJwAAAJMoTgAAACZRnAAAAEyiOAEAAJhEcQIAADCJ4gQAAGASxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABMojgBAACYRHECAAAwieIEAABgEsUJAADAJIoTAACASRQnAAAAkyhOAAAAJlGcAAAATKI4AQAAmERxAgAAMIniBAAAYBLFCQAAwCSKEwAAgEkUJwAAAJMoTgAAACZRnAAAAEyiOAEAAJhEcQIAADCJ4gQAAGASxQkAAMAkihMAAIBJFCcAAACTKE4AAAAmUZwAAABMojgBAACYRHECAAAwieIEAABgEsUJAADAJIoTAACASRQnAAAAkyhOAAAAJlGcAAAATKI4AQAAmERxAgAAMIniBAAAYNL/A06hoE6RWkgeAAAAAElFTkSuQmCC\n",
      "text/plain": [
       "<Figure size 576x576 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from discopy.quantum.circuit import Functor, Id\n",
    "\n",
    "def cnot_ob(ty):\n",
    "    # this implicitly maps all rigid types to 1 qubit\n",
    "    return qubit ** len(ty)\n",
    "\n",
    "def cnot_ar(box):\n",
    "    dom = len(box.dom)\n",
    "    cod = len(box.cod)\n",
    "    width = max(dom, cod)\n",
    "    circuit = Id(width)\n",
    "    for i in range(width - 1):\n",
    "        circuit >>= Id(i) @ CX @ Id(width - i - 2)\n",
    "\n",
    "    # Add Bras (post-selection) and Kets (states)\n",
    "    # to get a circuit with the right amount of\n",
    "    # input and output wires\n",
    "    if cod <= dom:\n",
    "        circuit >>= Id(cod) @ Bra(*[0]*(dom - cod))\n",
    "    else:\n",
    "        circuit <<= Id(dom) @ Ket(*[0]*(cod - dom))\n",
    "    return circuit\n",
    "\n",
    "cnot_functor = Functor(ob=cnot_ob, ar=cnot_ar)\n",
    "diagram.draw()\n",
    "cnot_functor(diagram).draw(figsize=(8, 8))"
   ]
  }
 ],
 "metadata": {
  "language_info": {
   "name": "python"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
